{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://markprint.io/schemas/dts-master-report.schema.json",
  "title": "DTS Master Report Metadata",
  "description": "Schema derived from DTS_Master_Report_Template.sla to drive the template registry",
  "type": "object",
  "required": [
    "pipeline_profile",
    "title",
    "document_id",
    "revision"
  ],
  "properties": {
    "pipeline_profile": {
      "type": "string",
      "enum": ["dts-master-report", "dts_master_report"],
      "description": "Pipeline profile identifier (canonical selector).",
      "default": "dts-master-report"
    },
    "layout_template": {
      "type": "string",
      "enum": ["dts-master-report", "dts_master_report"],
      "description": "Legacy alias for selecting the profile. Prefer pipeline_profile but keep this for backward compatibility.",
      "default": "dts-master-report"
    },
    "title": {
      "type": "string",
      "minLength": 1,
      "maxLength": 200,
      "description": "Document title rendered in the headline frame"
    },
    "document_id": {
      "type": "string",
      "description": "Primary document identifier (e.g., SOP-200)",
      "pattern": "^[A-Z]{2,6}[-_][0-9]{2,5}$"
    },
    "revision": {
      "type": "string",
      "description": "Revision indicator shown alongside the effective date",
      "pattern": "^[0-9]+(\\.[0-9]+)?$"
    },
    "effective_date": {
      "type": "string",
      "format": "date",
      "description": "Optional effective date in ISO format (YYYY-MM-DD)"
    },
    "status": {
      "type": "string",
      "description": "Workflow status that drives the status pill color",
      "enum": ["DRAFT", "REVIEW", "IN_REVIEW", "APPROVED", "SUPERSEDED", "OBSOLETE"],
      "default": "DRAFT"
    },
    "department": {
      "type": "string",
      "description": "Owning department name",
      "maxLength": 100
    },
    "owner": {
      "type": "string",
      "description": "Document owner",
      "maxLength": 100
    },
    "approver": {
      "type": "string",
      "description": "Approver name or role",
      "maxLength": 100
    },
    "amos_version": {
      "type": "string",
      "description": "AMOS compatibility version",
      "pattern": "^[0-9]+\\.[0-9]+$"
    },
    "apn": {
      "type": "string",
      "description": "Primary APN reference"
    },
    "upstream_apn": {
      "type": "string",
      "description": "Upstream APN reference",
      "default": ""
    },
    "downstream_apn": {
      "type": "string",
      "description": "Downstream APN reference",
      "default": ""
    },
    "owner_contact": {
      "type": "string",
      "description": "Optional owner email / contact info",
      "format": "email"
    },
    "status_note": {
      "type": "string",
      "description": "Free-form note rendered near the status pill"
    }
  },
  "additionalProperties": true
}
